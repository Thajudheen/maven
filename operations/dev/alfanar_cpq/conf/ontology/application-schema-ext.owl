<?xml version="1.0"?>


<!DOCTYPE rdf:RDF [
    <!ENTITY owl "http://www.w3.org/2002/07/owl#" >
    <!ENTITY swrl "http://www.w3.org/2003/11/swrl#" >
    <!ENTITY swrlb "http://www.w3.org/2003/11/swrlb#" >
    <!ENTITY xsd "http://www.w3.org/2001/XMLSchema#" >
    <!ENTITY afn "http://jena.hpl.hp.com/ARQ/function#" >
    <!ENTITY rdfs "http://www.w3.org/2000/01/rdf-schema#" >
    <!ENTITY xpath-fn "http://www.w3.org/2005/xpath-functions#" >
    <!ENTITY rdf "http://www.w3.org/1999/02/22-rdf-syntax-ns#" >
    <!ENTITY ps "http://www.inmindcomputing.com/platform/platform-schema.owl#" >
    <!ENTITY as "http://www.inmindcomputing.com/application/application-schema.owl#" >
    <!ENTITY ase "http://www.inmindcomputing.com/application/application-schema-ext.owl#" >
    <!ENTITY ai "http://www.inmindcomputing.com/application/application-implementation.owl#" >
]>


<rdf:RDF xmlns="http://www.inmindcomputing.com/application/application-schema-ext.owl#"
     xml:base="http://www.inmindcomputing.com/application/application-schema-ext.owl"
     xmlns:afn="http://jena.hpl.hp.com/ARQ/function#"
     xmlns:xpath-fn="http://www.w3.org/2005/xpath-functions#"
     xmlns:as="http://www.inmindcomputing.com/application/application-schema.owl#"
     xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
     xmlns:swrl="http://www.w3.org/2003/11/swrl#"
     xmlns:ai="http://www.inmindcomputing.com/application/application-implementation.owl#"
     xmlns:ase="http://www.inmindcomputing.com/application/application-schema-ext.owl#"
     xmlns:owl="http://www.w3.org/2002/07/owl#"
     xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
     xmlns:swrlb="http://www.w3.org/2003/11/swrlb#"
     xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
     xmlns:ps="http://www.inmindcomputing.com/platform/platform-schema.owl#">
    <owl:Ontology rdf:about="http://www.inmindcomputing.com/application/application-schema-ext.owl">
        <owl:versionInfo rdf:datatype="&xsd;string">0.4</owl:versionInfo>
        <rdfs:comment rdf:datatype="&xsd;string">Copyright (c) 2013, In Mind Cloud. All rights reserved.
IMC PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</rdfs:comment>
        <owl:imports rdf:resource="http://www.inmindcomputing.com/application/application-schema.owl"/>
        <owl:imports rdf:resource="http://www.inmindcomputing.com/application/report-schema.owl"/>
        <owl:imports rdf:resource="http://www.inmindcomputing.com/ssc/submodel.owl"/>
    </owl:Ontology>



    <!--
    ///////////////////////////////////////////////////////////////////////////////////////
    //
    // Data properties
    //
    ///////////////////////////////////////////////////////////////////////////////////////
     -->




    <!-- http://www.inmindcomputing.com/application/application-schema-ext.owl#breakerFunctionValidationError -->

    <owl:DatatypeProperty rdf:about="&ase;breakerFunctionValidationError">
        <rdf:type rdf:resource="&owl;FunctionalProperty"/>
        <rdfs:label xml:lang="en">Breaker Function Validation </rdfs:label>
        <ps:defaultValue rdf:datatype="&xsd;boolean">false</ps:defaultValue>
        <ps:sparql rdf:datatype="&xsd;string">select ?subject ?breakerFunctionValidationError
Where
{
   {

      select ?salesItem ?subject ?cq (count(?breaker) as ?breakerTotal)
      {
         ?salesItem as:salesItemIncludedBy ?cubicle.
         ?cubicle as:includesSalesItem ?breaker.
         ?cubicle as:isProduct pci:LV-CUBICLE.
         ?breaker as:isProduct pci:LV-BREAKER.
         {
            select ?salesItem  ?subject ?cq
            {
               ?subject as:configItemIncludedBy ?salesItem.
               ?salesItem as:includesItemHeaderPriceItem ?headerPriceItem .
               ?headerPriceItem  as:itemHeaderQuantity ?cq.
               ?subject ps:includesDynamicAttribute ?da.
               ?da ps:usesSymbolicValue ?obj.
               ?obj ps:isSymbolicValue pci:BreakerIncome.
            }

         }
      }GROUP BY ?salesItem ?subject ?cq

   }
   BIND(IF(?cq!=1 || ?breakerTotal&gt;1,true,false)AS ?breakerFunctionValidationError)

}</ps:sparql>
        <rdfs:comment xml:lang="en">If the function is  income the ONLY quantity 1 is correct</rdfs:comment>
        <rdfs:domain rdf:resource="&as;ConfigItem"/>
        <rdfs:subPropertyOf rdf:resource="&ps;calculation"/>
        <rdfs:subPropertyOf rdf:resource="&ps;materialization"/>
        <rdfs:range rdf:resource="&xsd;boolean"/>
    </owl:DatatypeProperty>



    <!-- http://www.inmindcomputing.com/application/application-schema-ext.owl#cubicleNoSpaceValidationError -->

    <owl:DatatypeProperty rdf:about="&ase;cubicleNoSpaceValidationError">
        <rdf:type rdf:resource="&owl;FunctionalProperty"/>
        <rdfs:label xml:lang="en">Not enough space</rdfs:label>
        <ps:defaultValue rdf:datatype="&xsd;boolean">false</ps:defaultValue>
        <ps:sparql>Select ?subject ?cubicleNoSpaceValidationError
WHERE {
?subject pcs:cubicleDoorSpace ?space.
  BIND (IF (46 - 6 - ?space &lt; xsd:decimal(0),xsd:boolean(true), xsd:boolean(false)) As ?cubicleNoSpaceValidationError).
} </ps:sparql>
        <rdfs:domain rdf:resource="&as;ConfigItem"/>
        <rdfs:subPropertyOf rdf:resource="&ps;calculation"/>
        <rdfs:subPropertyOf rdf:resource="&ps;materialization"/>
        <rdfs:range rdf:resource="&xsd;boolean"/>
    </owl:DatatypeProperty>



    <!-- http://www.inmindcomputing.com/application/application-schema-ext.owl#documentHeaderPriceBeforeDiscount -->

    <owl:DatatypeProperty rdf:about="&ase;documentHeaderPriceBeforeDiscount">
        <rdf:type rdf:resource="&owl;FunctionalProperty"/>
        <rdfs:label>Header Price Before Discount</rdfs:label>
        <ps:sparql rdf:datatype="&xsd;string">SELECT ?subject (?val as ?documentHeaderPriceBeforeDiscount)
  WHERE {
?subject as:documentHeaderPriceAfterItemDiscount ?aid.
    ?subject ase:documentHeaderTotalDiscountBeforeQuoteDiscount ?qp .
    BIND (xsd:decimal(?aid - ?qp)  AS ?val)
  }</ps:sparql>
        <rdfs:domain rdf:resource="&as;DocumentHeaderPriceItem"/>
        <rdfs:subPropertyOf rdf:resource="&ps;calculation"/>
        <rdfs:subPropertyOf rdf:resource="&ps;materialization"/>
        <rdfs:range rdf:resource="&xsd;decimal"/>
    </owl:DatatypeProperty>



    <!-- http://www.inmindcomputing.com/application/application-schema-ext.owl#documentHeaderTotalDiscountBeforeQuoteDiscount -->

    <owl:DatatypeProperty rdf:about="&ase;documentHeaderTotalDiscountBeforeQuoteDiscount">
        <rdf:type rdf:resource="&owl;FunctionalProperty"/>
        <ps:sparql rdf:datatype="&xsd;string">SELECT ?subject (SUM(?val) as ?documentHeaderTotalDiscountBeforeQuoteDiscount)
  WHERE {
    ?subject as:documentHeaderPriceItemIncludedBy ?q.
    ?q as:includesSalesItem+ ?si .
    ?si as:includesItemHeaderPriceItem ?ihpi .
    {
      SELECT DISTINCT ?ihpi ?val
      WHERE
      {
             ?ihpi as:itemHeaderTotalDiscount ?cp .
             BIND (xsd:decimal(?cp) AS ?val )
      }
    }
   } GROUP BY ?subject</ps:sparql>
        <rdfs:domain rdf:resource="&as;DocumentHeaderPriceItem"/>
        <rdfs:subPropertyOf rdf:resource="&ps;calculation"/>
        <rdfs:subPropertyOf rdf:resource="&ps;materialization"/>
        <rdfs:range rdf:resource="&xsd;decimal"/>
    </owl:DatatypeProperty>



    <!-- http://www.inmindcomputing.com/application/application-schema-ext.owl#documentHeaderTotalDiscountPercentage -->

    <owl:DatatypeProperty rdf:about="&ase;documentHeaderTotalDiscountPercentage">
        <rdf:type rdf:resource="&owl;FunctionalProperty"/>
        <ps:sparql rdf:datatype="&xsd;string">SELECT ?subject (?val as ?documentHeaderTotalDiscountPercentage)
  WHERE {
?subject as:documentHeaderTotalDiscount ?td.
    ?subject ase:documentHeaderPriceBeforeDiscount ?bd .
    BIND (xsd:decimal( ?td *  xsd:decimal(100) / ?bd )  AS ?val)
  }</ps:sparql>
        <rdfs:domain rdf:resource="&as;DocumentHeaderPriceItem"/>
        <rdfs:subPropertyOf rdf:resource="&ps;calculation"/>
        <rdfs:subPropertyOf rdf:resource="&ps;materialization"/>
        <rdfs:range rdf:resource="&xsd;decimal"/>
    </owl:DatatypeProperty>



    <!-- http://www.inmindcomputing.com/application/application-schema-ext.owl#electricalValidationError -->

    <owl:DatatypeProperty rdf:about="&ase;electricalValidationError">
        <rdf:type rdf:resource="&owl;FunctionalProperty"/>
        <rdfs:label xml:lang="en">Electrical Validation Error</rdfs:label>
        <ps:defaultValue rdf:datatype="&xsd;boolean">false</ps:defaultValue>
        <ps:sparql rdf:datatype="&xsd;string">select ?subject ?electricalValidationError
where {
   ?subject as:configItemIncludedBy ?salesItem .
   ?subject pcs:breakerCurrentTotal ?btotal.
   ?subject ps:includesDynamicAttribute ?da.
   ?da ps:isDynamicAttribute pci:Lv-cubicleVbbI .
   ?da ps:usesSymbolicValue ?obj.
   ?obj as:attributionFactor ?cmax.
   ?salesItem as:isProduct pci:LV-CUBICLE.
   BIND(IF(?btotal&gt;?cmax,true,false) AS ?electricalValidationError)
}</ps:sparql>
        <rdfs:domain rdf:resource="&as;ConfigItem"/>
        <rdfs:subPropertyOf rdf:resource="&ps;calculation"/>
        <rdfs:subPropertyOf rdf:resource="&ps;materialization"/>
        <rdfs:range rdf:resource="&xsd;boolean"/>
    </owl:DatatypeProperty>



    <!-- http://www.inmindcomputing.com/application/application-schema-ext.owl#itemHeaderAdditionalPriceIncludes -->

    <owl:DatatypeProperty rdf:about="&ase;itemHeaderAdditionalPriceIncludes">
        <rdf:type rdf:resource="&owl;FunctionalProperty"/>
        <ps:defaultValue rdf:datatype="&xsd;decimal">0</ps:defaultValue>
        <ps:sparql rdf:datatype="&xsd;string">SELECT DISTINCT ?subject (SUM(?val) as ?itemHeaderAdditionalPriceIncludes)
  WHERE {
   ?subject as:includesPriceItem ?priceItem .

    ?priceItem as:hasPriceItemType as:AdditionalPriceItemType .
      ?priceItem as:priceItemBaseAmount ?val



  } GROUP BY ?subject</ps:sparql>
        <rdfs:domain rdf:resource="&as;ItemHeaderPriceItem"/>
        <rdfs:subPropertyOf rdf:resource="&ps;calculation"/>
        <rdfs:subPropertyOf rdf:resource="&ps;materialization"/>
        <rdfs:range rdf:resource="&xsd;decimal"/>
    </owl:DatatypeProperty>



    <!-- http://www.inmindcomputing.com/application/application-schema-ext.owl#mechHeightValidationError -->

    <owl:DatatypeProperty rdf:about="&ase;mechHeightValidationError">
        <rdf:type rdf:resource="&owl;FunctionalProperty"/>
        <rdfs:label xml:lang="en">Mechanical Rule Check</rdfs:label>
        <ps:defaultValue rdf:datatype="&xsd;boolean">false</ps:defaultValue>
        <rdfs:domain rdf:resource="&as;ConfigItem"/>
        <rdfs:subPropertyOf rdf:resource="&ps;calculation"/>
        <rdfs:subPropertyOf rdf:resource="&ps;materialization"/>
        <rdfs:range rdf:resource="&xsd;boolean"/>
    </owl:DatatypeProperty>



    <!-- http://www.inmindcomputing.com/application/application-schema-ext.owl#quoteIntro -->

    <owl:DatatypeProperty rdf:about="&ase;quoteIntro">
        <rdf:type rdf:resource="&owl;FunctionalProperty"/>
        <rdfs:label xml:lang="de">Angebotseinleitung</rdfs:label>
        <rdfs:label xml:lang="en">Quote Introduction</rdfs:label>
        <ps:advancedEditor rdf:datatype="&xsd;boolean">true</ps:advancedEditor>
        <rdfs:comment xml:lang="de">${quote.intro.textAl1}&lt;br&gt;&lt;br&gt;${quote.intro.textAl2a}&lt;br&gt;${quote.intro.textAl2b}&lt;br&gt;${quote.intro.textAl2c}&lt;br&gt;&lt;br&gt;${quote.intro.textAl3}&lt;br&gt;&lt;br&gt;${quote.intro.textAl4}&lt;br&gt;&lt;br&gt;${quote.intro.textAl6}&lt;br&gt;</rdfs:comment>
        <rdfs:comment xml:lang="en">${quote.intro.textAl1}&lt;br&gt;&lt;br&gt;${quote.intro.textAl2a}&lt;br&gt;${quote.intro.textAl2b}&lt;br&gt;${quote.intro.textAl2c}&lt;br&gt;&lt;br&gt;${quote.intro.textAl3}&lt;br&gt;&lt;br&gt;${quote.intro.textAl4}&lt;br&gt;&lt;br&gt;${quote.intro.textAl6}&lt;br&gt;</rdfs:comment>
        <rdfs:domain rdf:resource="&as;Quote"/>
        <rdfs:subPropertyOf rdf:resource="&ps;assertion"/>
        <rdfs:range rdf:resource="&xsd;string"/>
    </owl:DatatypeProperty>



    <!-- http://www.inmindcomputing.com/application/application-schema-ext.owl#quoteTerms -->

    <owl:DatatypeProperty rdf:about="&ase;quoteTerms">
        <rdf:type rdf:resource="&owl;FunctionalProperty"/>
        <rdfs:label xml:lang="de">Angebot - Gesch√§ftsbedingungen</rdfs:label>
        <rdfs:label xml:lang="en">Quote Terms and Conditions</rdfs:label>
        <ps:advancedEditor rdf:datatype="&xsd;boolean">true</ps:advancedEditor>
        <rdfs:comment xml:lang="de">&lt;u&gt;${terms.label.title}&lt;/u&gt;&lt;br&gt;&lt;br&gt;${terms.label.prices}:&lt;br&gt;${terms.text.prices}&lt;br&gt;&lt;br&gt;${terms.label.validity}:&lt;br&gt;${terms.text.validity.first}${quote.label.date.expiry}. ${terms.text.validity.second}&lt;br&gt;&lt;br&gt;${terms.label.support}:&lt;br&gt;${terms.text.support}&lt;br&gt;&lt;br&gt;${terms.label.scope}:&lt;br&gt;${terms.text.scope}&lt;br&gt;&lt;br&gt;${terms.label.msa}:&lt;br&gt;${terms.text.msa}&lt;br&gt;&lt;br&gt;${terms.text.reference.first}&amp;nbsp;account&amp;nbsp;${terms.text.reference.second}&lt;br&gt;&lt;br&gt;${terms.text.approval}&lt;br&gt;&lt;br&gt;${terms.text.information}</rdfs:comment>
        <rdfs:comment xml:lang="en">&lt;u&gt;${terms.label.scope}&lt;/u&gt;&lt;br&gt;&lt;br&gt;${terms.text.scope}&lt;br&gt;&lt;br&gt;
&lt;u&gt;${terms.label.prices}&lt;/u&gt;&lt;br&gt;&lt;br&gt;${terms.text.prices}&lt;br&gt;&lt;br&gt;
&lt;u&gt;${terms.label.terms}&lt;/u&gt;&lt;br&gt;&lt;br&gt;${terms.text.terms}&lt;br&gt;${terms.text.terms1}&lt;br&gt;&lt;br&gt;
&lt;u&gt;${terms.label.title}&lt;/u&gt;&lt;br&gt;&lt;br&gt;${terms.text.title}&lt;br&gt;&lt;br&gt;
&lt;u&gt;${terms.label.delivery}&lt;/u&gt;&lt;br&gt;&lt;br&gt;${terms.text.delivery}&lt;br&gt;&lt;br&gt;
&lt;u&gt;${terms.label.validity}&lt;/u&gt;&lt;br&gt;&lt;br&gt;${terms.text.validity}&lt;br&gt;&lt;br&gt;
&lt;u&gt;${terms.label.inspection}&lt;/u&gt;&lt;br&gt;&lt;br&gt;${terms.text.inspection}&lt;br&gt;${terms.text.inspection1}&lt;br&gt;${terms.text.inspection2}&lt;br&gt;${terms.text.inspection3}&lt;br&gt;${terms.text.inspection4}&lt;br&gt;&lt;br&gt;
&lt;u&gt;${terms.label.warranty}&lt;/u&gt;&lt;br&gt;&lt;br&gt;${terms.text.warranty}&lt;br&gt;&lt;br&gt;
&lt;u&gt;${terms.label.cancelation}&lt;/u&gt;&lt;br&gt;&lt;br&gt;${terms.text.cancelation}&lt;br&gt;${terms.text.cancelation1}&lt;br&gt;${terms.text.cancelation2}&lt;br&gt;${terms.text.cancelation3}&lt;br&gt;${terms.text.cancelation4}&lt;br&gt;&lt;br&gt;
&lt;u&gt;${terms.label.exclusion}&lt;/u&gt;&lt;br&gt;&lt;br&gt;${terms.text.exclusion}&lt;br&gt;${terms.text.exclusion1}&lt;br&gt;${terms.text.exclusion2}&lt;br&gt;${terms.text.exclusion3}&lt;br&gt;${terms.text.exclusion4}&lt;br&gt;${terms.text.exclusion5}&lt;br&gt;${terms.text.exclusion6}&lt;br&gt;${terms.text.exclusion7}&lt;br&gt;${terms.text.exclusion8}&lt;br&gt;${terms.text.exclusion9}&lt;br&gt;${terms.text.exclusion10}&lt;br&gt;${terms.text.exclusion11}&lt;br&gt;${terms.text.exclusion12}&lt;br&gt;${terms.text.exclusion13}&lt;br&gt;</rdfs:comment>
        <rdfs:domain rdf:resource="&as;Quote"/>
        <rdfs:subPropertyOf rdf:resource="&ps;assertion"/>
        <rdfs:range rdf:resource="&xsd;string"/>
    </owl:DatatypeProperty>



    <!-- http://www.inmindcomputing.com/application/application-schema-ext.owl#zQuoteDefaultMargin -->

    <owl:DatatypeProperty rdf:about="&ase;zQuoteDefaultMargin">
        <rdf:type rdf:resource="&owl;FunctionalProperty"/>
        <rdfs:label xml:lang="en">Standard Margin</rdfs:label>
        <ps:defaultValue rdf:datatype="&xsd;decimal">45</ps:defaultValue>
        <ps:readOnly rdf:datatype="&xsd;boolean">true</ps:readOnly>
        <ps:sequenceID>1</ps:sequenceID>
        <ps:group rdf:resource="&ase;AdditionalAttributesQuote"/>
        <rdfs:domain rdf:resource="&as;Quote"/>
        <rdfs:subPropertyOf rdf:resource="&ps;assertion"/>
        <rdfs:range rdf:resource="&xsd;decimal"/>
    </owl:DatatypeProperty>



    <!-- http://www.inmindcomputing.com/application/application-schema-ext.owl#zQuoteMargin -->

    <owl:DatatypeProperty rdf:about="&ase;zQuoteMargin">
        <rdf:type rdf:resource="&owl;FunctionalProperty"/>
        <rdfs:label xml:lang="en">Margin</rdfs:label>
        <ps:readOnly rdf:datatype="&xsd;boolean">true</ps:readOnly>
        <ps:sequenceID>2</ps:sequenceID>
        <ps:sparql>SELECT ?subject (?val as ?zQuoteMargin)
WHERE {
?subject as:includesDocumentHeaderPriceItem ?dhp.
  ?dhp as:documentHeaderPriceAfterItemDiscount ?qp .
   ?dhp as:documentHeaderPrice ?hp .

   BIND (
         xsd:decimal(((xsd:decimal(?hp)-xsd:decimal(?qp))/?qp*100))  AS ?val)
}</ps:sparql>
        <ps:group rdf:resource="&ase;AdditionalAttributesQuote"/>
        <rdfs:domain rdf:resource="&as;Quote"/>
        <rdfs:subPropertyOf rdf:resource="&ps;calculation"/>
        <rdfs:range rdf:resource="&xsd;decimal"/>
    </owl:DatatypeProperty>



    <!-- http://www.inmindcomputing.com/application/application-schema.owl#documentHeaderPriceBeforeItemDiscount -->

    <owl:DatatypeProperty rdf:about="&as;documentHeaderPriceBeforeItemDiscount">
        <ps:sparql>SELECT ?subject (sum(?val) as ?documentHeaderPriceBeforeItemDiscount)
WHERE
{
   ?subject as:documentHeaderPriceItemIncludedBy ?q.
   ?q as:includesSalesItem+ ?si .
   ?si as:includesItemHeaderPriceItem ?c .
   FILTER (?cp != xsd:string(&quot;-&quot;))
   ?c as:itemHeaderPrice ?cp .
   BIND (?cp as ?val)
} GROUP BY ?subject</ps:sparql>
        <rdfs:domain rdf:resource="&as;DocumentHeaderPriceItem"/>
        <rdfs:subPropertyOf rdf:resource="&ps;calculation"/>
        <rdfs:subPropertyOf rdf:resource="&ps;materialization"/>
        <rdfs:range rdf:resource="&xsd;decimal"/>
    </owl:DatatypeProperty>



    <!-- http://www.inmindcomputing.com/application/application-schema.owl#itemHeaderTotalDiscount -->

    <owl:DatatypeProperty rdf:about="&as;itemHeaderTotalDiscount">
        <rdf:type rdf:resource="&owl;FunctionalProperty"/>
        <ps:sparql rdf:datatype="&xsd;string">SELECT ?subject (?val as ?itemHeaderTotalDiscount)
  WHERE {
    ?subject as:itemHeaderAdditionalPrice ?ap .
    ?subject as:itemHeaderTotalPrice ?tp .
    ?subject as:itemHeaderPrice ?hp .
    ?subject as:itemHeaderQuantity ?cq .
    ?salesItem as:includesItemHeaderPriceItem ?subject .
    ?salesItem as:salesItemOptional ?co .
    BIND ( IF (?co, xsd:decimal(?tp - (?hp + ?ap) * ?cq), xsd:decimal(0))  as ?val )
  }
    </ps:sparql>
        <rdfs:domain rdf:resource="&as;ItemHeaderPriceItem"/>
        <rdfs:subPropertyOf rdf:resource="&ps;calculation"/>
        <rdfs:subPropertyOf rdf:resource="&ps;materialization"/>
        <rdfs:range rdf:resource="&xsd;decimal"/>
    </owl:DatatypeProperty>



    <!-- http://www.inmindcomputing.com/application/application-schema.owl#salesItemErrorText -->

    <rdf:Description rdf:about="&as;salesItemErrorText">
        <rdf:type rdf:resource="&owl;FunctionalProperty"/>
        <ps:sparql rdf:datatype="&xsd;string">select DISTINCT ?subject ?salesItemErrorText
where {
   ?subject as:includesConfigItem ?config .
   ?config as:configItemErrorText ?configErrorText .
   BIND(?configErrorText AS ?salesItemErrorText)

}</ps:sparql>
    </rdf:Description>



    <!--
    ///////////////////////////////////////////////////////////////////////////////////////
    //
    // Individuals
    //
    ///////////////////////////////////////////////////////////////////////////////////////
     -->




    <!-- http://www.inmindcomputing.com/application/application-schema-ext.owl#AdditionalAttributesQuote -->

    <owl:NamedIndividual rdf:about="&ase;AdditionalAttributesQuote">
        <rdf:type rdf:resource="&as;Group"/>
        <rdfs:label>Margin</rdfs:label>
        <ps:sequenceID rdf:datatype="&xsd;int">10</ps:sequenceID>
        <ps:groupCode rdf:datatype="&xsd;int">5</ps:groupCode>
        <ps:groupDescription rdf:datatype="&xsd;string">Add Attribute</ps:groupDescription>
    </owl:NamedIndividual>



    <!-- http://www.inmindcomputing.com/application/application-schema-ext.owl#CalculatedCopperCostConstruct -->

    <owl:NamedIndividual rdf:about="&ase;CalculatedCopperCostConstruct">
        <rdf:type rdf:resource="&ps;TriggeredCalculation"/>
        <ps:graphSelection rdf:datatype="&xsd;string">USER</ps:graphSelection>
        <ps:forType rdf:datatype="&xsd;string">as:Quote</ps:forType>
        <ps:sparql>    CONSTRUCT {
 ?uuid a as:PriceItem;
    as:priceItemBaseAmount ?amount;
     as:hasBaseCurrency ?currency;
    as:priceItemIncludedBy ?ihpi;
    as:hasPriceItemType ai:CopperCostType;
 #rdf:type owl:NamedIndividual;

}
WHERE {
  {
   Select ?amount ?ihpi ?currency ?uuid WHERE
   {


     ?q rdf:type ps:ActiveObject .
    ?o rdf:type as:PriceItem .
     ?q rdf:type as:Quote.
     ?q as:hasBaseCurrency ?currency.
     ?o as:priceItemIncludedBy ?ihpi.
     ?ihpi as:itemHeaderPriceItemIncludedBy ?si.
     ?si as:salesItemIncludedBy+ ?q.
?si as:includesConfigItem ?conf.
  ?conf pcs:sbCostCopper ?amount.

   BIND ( iri(concat(xsd:string(?si),&quot;dynamicPrice2&quot; )) as ?uuid).
  } Group By ?amount ?ihpi ?currency ?uuid
  }

}
</ps:sparql>
    </owl:NamedIndividual>



    <!-- http://www.inmindcomputing.com/application/application-schema-ext.owl#CalculatedLaborCostConstruct -->

    <owl:NamedIndividual rdf:about="&ase;CalculatedLaborCostConstruct">
        <rdf:type rdf:resource="&ps;TriggeredCalculation"/>
        <ps:objectName rdf:datatype="&xsd;string">CalculatedLaborCostConstruct</ps:objectName>
        <ps:graphSelection rdf:datatype="&xsd;string">USER</ps:graphSelection>
        <ps:forType rdf:datatype="&xsd;string">as:Quote</ps:forType>
        <ps:sparql>    CONSTRUCT {
?uuid a as:PriceItem;
   as:priceItemBaseAmount ?amount;
   as:hasBaseCurrency ?currency;
    as:priceItemIncludedBy ?ihpi;
    as:hasPriceItemType ai:LaborCostType;
 rdf:type owl:NamedIndividual;

}
WHERE {
  {
   Select ?amount ?ihpi ?currency ?uuid WHERE
   {


     ?q rdf:type ps:ActiveObject .
    ?o rdf:type as:PriceItem .
     ?q rdf:type as:Quote.
     ?q as:hasBaseCurrency ?currency.
     ?o as:priceItemIncludedBy ?ihpi.
     ?ihpi as:itemHeaderPriceItemIncludedBy ?si.
     ?si as:salesItemIncludedBy+ ?q.
?si as:includesConfigItem ?conf.
  ?conf pcs:sbCostLabor ?amount.

   BIND ( iri(concat(xsd:string(?si),&quot;dynamicPrice&quot; )) as ?uuid).
  } Group By ?amount ?ihpi ?currency ?uuid
  }

}
</ps:sparql>
    </owl:NamedIndividual>



    <!-- http://www.inmindcomputing.com/application/application-schema-ext.owl#CalculatedMaterialCostConstruct -->

    <owl:NamedIndividual rdf:about="&ase;CalculatedMaterialCostConstruct">
        <rdf:type rdf:resource="&ps;TriggeredCalculation"/>
        <ps:objectName rdf:datatype="&xsd;string">TriggerCalcMaterialCostConstruct</ps:objectName>
        <ps:graphSelection rdf:datatype="&xsd;string">USER</ps:graphSelection>
        <ps:forType rdf:datatype="&xsd;string">as:Quote</ps:forType>
        <ps:sparql>    CONSTRUCT {
 ?uuid a as:PriceItem;
    as:priceItemBaseAmount ?amount;
     as:hasBaseCurrency ?currency;
    as:priceItemIncludedBy ?ihpi;
    as:hasPriceItemType ai:MaterialCostType;
 rdf:type owl:NamedIndividual;

}
WHERE {
  {
   Select ?amount ?ihpi ?currency ?uuid WHERE
   {


     ?q rdf:type ps:ActiveObject .
    ?o rdf:type as:PriceItem .
     ?q rdf:type as:Quote.
     ?q as:hasBaseCurrency ?currency.
     ?o as:priceItemIncludedBy ?ihpi.
     ?ihpi as:itemHeaderPriceItemIncludedBy ?si.
     ?si as:salesItemIncludedBy+ ?q.
?si as:includesConfigItem ?conf.
  ?conf pcs:sbCostMaterial ?amount.

   BIND ( iri(concat(xsd:string(?si),&quot;dynamicPrice1&quot; )) as ?uuid).
  } Group By ?amount ?ihpi ?currency ?uuid
  }

}
</ps:sparql>
    </owl:NamedIndividual>



    <!-- http://www.inmindcomputing.com/application/application-schema-ext.owl#CalculatedOHConstruct -->

    <owl:NamedIndividual rdf:about="&ase;CalculatedOHConstruct">
        <rdf:type rdf:resource="&ps;TriggeredCalculation"/>
        <ps:objectName rdf:datatype="&xsd;string">Calculated OH Construct</ps:objectName>
        <ps:graphSelection rdf:datatype="&xsd;string">USER</ps:graphSelection>
        <ps:forType rdf:datatype="&xsd;string">as:Quote</ps:forType>
        <ps:sparql>    CONSTRUCT {
 ?uuid a as:PriceItem;
    as:priceItemBaseAmount ?amount;
     as:hasBaseCurrency ?currency;
    as:priceItemIncludedBy ?ihpi;
    as:hasPriceItemType ai:OverheadCostType;
 #rdf:type owl:NamedIndividual;

}
WHERE {
  {
   Select ?amount ?ihpi ?currency ?uuid WHERE
   {


     ?q rdf:type ps:ActiveObject .
    ?o rdf:type as:PriceItem .
     ?q rdf:type as:Quote.
     ?q as:hasBaseCurrency ?currency.
     ?o as:priceItemIncludedBy ?ihpi.
     ?ihpi as:itemHeaderPriceItemIncludedBy ?si.
     ?si as:salesItemIncludedBy+ ?q.
?si as:includesConfigItem ?conf.
  ?conf pcs:sbCostOH ?amount.

   BIND ( iri(concat(xsd:string(?si),&quot;dynamicPrice4&quot; )) as ?uuid).
  } Group By ?amount ?ihpi ?currency ?uuid
  }

}
</ps:sparql>
    </owl:NamedIndividual>



    <!-- http://www.inmindcomputing.com/application/application-schema-ext.owl#CalculatedPriceItemConstruct -->

    <owl:NamedIndividual rdf:about="&ase;CalculatedPriceItemConstruct">
        <rdf:type rdf:resource="&ps;TriggeredCalculation"/>
        <ps:objectName rdf:datatype="&xsd;string">PriceItemConstruct</ps:objectName>
        <ps:graphSelection rdf:datatype="&xsd;string">USER</ps:graphSelection>
        <ps:forType rdf:datatype="&xsd;string">as:Quote</ps:forType>
        <rdfs:comment> rdf:datatype=&quot;http://www.w3.org/2001/XMLSchema#string&quot;&gt;
  #      CONSTRUCT {
 #  ?uuid a as:PriceItem;
 #     as:priceItemBaseAmount ?amount;
 #     as:hasBaseCurrency ?currency;
 #     as:priceItemIncludedBy ?ihpi;
 #     as:hasPriceItemType as:CalculationType;
# rdf:type owl:NamedIndividual;

#}
#WHERE {
#   {
#   Select ?amount ?ihpi ?currency ?uuid WHERE
#   {


 #     ?q rdf:type ps:ActiveObject .
 #    ?o rdf:type as:PriceItem .
 #     ?q rdf:type as:Quote.
 #     ?q as:hasBaseCurrency ?currency.
 #     ?o as:priceItemIncludedBy ?ihpi.
 #     ?ihpi as:itemHeaderPriceItemIncludedBy ?si.
 #     ?si as:salesItemIncludedBy+ ?q.
# ?si as:includesConfigItem ?conf.
 #  ?conf pcs:breakerWiringRoutingCost ?amount.
    #  BIND (?cost AS ?calculatedPriceItemBaseAmount)
  #   BIND ( iri(concat(xsd:string(?si),&quot;dynamicPrice&quot; )) as ?uuid).
 #  } Group By ?amount ?ihpi ?currency ?uuid
 #  }
#
#}

</rdfs:comment>
    </owl:NamedIndividual>



    <!-- http://www.inmindcomputing.com/application/application-schema-ext.owl#CalculatedSFGCostConstruct -->

    <owl:NamedIndividual rdf:about="&ase;CalculatedSFGCostConstruct">
        <rdf:type rdf:resource="&ps;TriggeredCalculation"/>
        <ps:graphSelection rdf:datatype="&xsd;string">USER</ps:graphSelection>
        <ps:forType rdf:datatype="&xsd;string">as:Quote</ps:forType>
        <ps:sparql>    CONSTRUCT {
 ?uuid a as:PriceItem;
    as:priceItemBaseAmount ?amount;
     as:hasBaseCurrency ?currency;
    as:priceItemIncludedBy ?ihpi;
    as:hasPriceItemType ai:SFGCostType;
 #rdf:type owl:NamedIndividual;

}
WHERE {
  {
   Select ?amount ?ihpi ?currency ?uuid WHERE
   {


     ?q rdf:type ps:ActiveObject .
    ?o rdf:type as:PriceItem .
     ?q rdf:type as:Quote.
     ?q as:hasBaseCurrency ?currency.
     ?o as:priceItemIncludedBy ?ihpi.
     ?ihpi as:itemHeaderPriceItemIncludedBy ?si.
     ?si as:salesItemIncludedBy+ ?q.
?si as:includesConfigItem ?conf.
  ?conf pcs:sbCostSFG ?amount.

   BIND ( iri(concat(xsd:string(?si),&quot;dynamicPrice5&quot; )) as ?uuid).
  } Group By ?amount ?ihpi ?currency ?uuid
  }

}
</ps:sparql>
    </owl:NamedIndividual>



    <!--
    ///////////////////////////////////////////////////////////////////////////////////////
    //
    // Annotations
    //
    ///////////////////////////////////////////////////////////////////////////////////////
     -->

    <rdf:Description rdf:about="&as;designElementError">
        <ps:defaultValue rdf:datatype="&xsd;boolean">false</ps:defaultValue>
    </rdf:Description>
    <rdf:Description rdf:about="&as;documentHeaderPrice">
        <ps:defaultValue rdf:datatype="&xsd;decimal">0</ps:defaultValue>
        <ps:sparql rdf:datatype="&xsd;string">SELECT ?subject (?val as ?documentHeaderPrice)
WHERE {
   ?subject as:documentHeaderPriceAfterItemDiscount ?qp .
   ?subject as:documentHeaderDiscount ?qd .
   ?subject as:documentHeaderPriceItemIncludedBy ?quote.
   #Optional { ?quote ase:zQuoteDefaultMargin ?dm.}
   BIND (xsd:decimal(?qp)  AS ?val)
#BIND (IF (EXISTS {?quote ase:zQuoteDefaultMargin ?dm.},
     #    BIND (xsd:decimal((xsd:decimal(?qp)*(1+xsd:decimal((?dm*0.01)-xsd:decimal(?qd)*0.01)))),
   #   xsd:decimal(xsd:decimal(?qp)*xsd:decimal(100-?qd)*0.01))  AS ?val)
}</ps:sparql>
    </rdf:Description>
    <rdf:Description rdf:about="&as;itemHeaderCurrentPrice">
        <ps:sparql rdf:datatype="&xsd;string">
        SELECT ?subject ?itemHeaderCurrentPrice
WHERE {
?subject as:itemHeaderPriceItemIncludedBy ?sal.
?sal as:includesConfigItem ?conf.
?conf pcs:sbCostTotal ?itemHeaderCurrentPrice.
  }
</ps:sparql>
    </rdf:Description>
    <rdf:Description rdf:about="&as;productSpec">
        <ps:hidden rdf:datatype="&xsd;string">true</ps:hidden>
    </rdf:Description>
    <rdf:Description rdf:about="&as;opportunityWeightedVolume">
        <ps:defaultValue rdf:datatype="&xsd;decimal">0</ps:defaultValue>
        <ps:sparql rdf:datatype="&xsd;string">SELECT ?subject (?val as ?opportunityWeightedVolume)
  WHERE {
    ?subject as:opportunityVolume ?vol .
    ?subject as:opportunityChanceofSuccess ?prop .
    BIND (xsd:decimal(xsd:decimal(?vol)*xsd:decimal(?prop)*0.01)  AS ?val)
  }</ps:sparql>
    </rdf:Description>
    <rdf:Description rdf:about="&as;documentHeaderPriceAfterDiscount">
        <ps:defaultValue rdf:datatype="&xsd;decimal">0</ps:defaultValue>
        <ps:sparql rdf:datatype="&xsd;string">SELECT ?subject (sum(?val) as ?documentHeaderAfterConfigItemDiscount)
  WHERE
  {
    ?subject as:includesSalesItem+ ?c .
    {
      SELECT DISTINCT ?c ?val
      WHERE
      {
             ?c as:itemHeaderTotalPrice ?cp .
             BIND (xsd:decimal(?cp) AS ?val )
      }
    }
  }
  GROUP BY ?subject</ps:sparql>
    </rdf:Description>
    <rdf:Description rdf:about="&as;productVolumeLimit">
        <ps:hidden rdf:datatype="&xsd;string">true</ps:hidden>
    </rdf:Description>
    <rdf:Description rdf:about="&as;enterpriseImage">
        <ps:defaultValue rdf:datatype="&xsd;string">logo.png</ps:defaultValue>
    </rdf:Description>
    <rdf:Description rdf:about="&as;productIsOptional">
        <ps:defaultValue rdf:datatype="&xsd;boolean">false</ps:defaultValue>
    </rdf:Description>
    <rdf:Description rdf:about="&as;configItemError">
        <ps:sparql rdf:datatype="&xsd;string">
SELECT Distinct ?subject ?configItemError
WHERE {
          OPTIONAL{
           ?subject as:configItemIncludedBy ?designElement .
           ?designElement as:designElementError ?designElementError2 .
          }
          OPTIONAL{
           ?subject as:configItemIncludedBy ?salesItem .
           ?subject rdf:type ?kbType .
           ?kbType rdfs:subClassOf as:KnowledgeBase .
           ?pred rdfs:domain ?kbType .
           ?pred ps:mandatory true .
           FILTER NOT EXISTS { ?subject ?pred ?val } .
           BIND (if(NOT EXISTS { ?subject ?pred ?val }, true, false) as ?configErrorStatic2) .
          }
         OPTIONAL{
            {
               SELECT ?subject (COUNT(?pred) as ?errorCount) WHERE {
                  {SELECT ?subject ?pred  WHERE {
                        ?subject as:configItemIncludedBy ?salesItem .
                        ?subject ps:includesDynamicAttribute ?pred .
                        ?pred ps:dynamicAttributeMandatory true.
                        FILTER NOT EXISTS { ?pred ps:dynamicAttributeHidden ?hidden. }
                        ?pred rdf:type ps:DynamicSymbolicAttribute.
                        FILTER NOT EXISTS { ?pred ps:usesSymbolicValue ?val. }
                     }
                  }
                    UNION
                    {
                     SELECT ?subject ?pred  WHERE {
                      ?subject as:configItemIncludedBy ?salesItem .
                      ?subject ps:includesDynamicAttribute ?pred .
                      ?pred ps:dynamicAttributeMandatory true.
                      FILTER NOT EXISTS { ?pred ps:dynamicAttributeHidden ?hidden.}
                      FILTER NOT EXISTS { ?pred rdf:type ps:DynamicSymbolicAttribute }
                      FILTER NOT EXISTS { ?pred ps:dynamicDataAttributeValue ?val. }
                     }
                    }
               } GROUP BY ?subject
            }
            BIND (IF(?errorCount&gt;0 , true, false) as ?configErrorDynamic2) .

         }
         BIND (if (!bound(?designElementError2),false,?designElementError2) as ?designElementError  )
         BIND (if (!bound(?configErrorStatic2),false,?configErrorStatic2) as ?configErrorStatic  )
         BIND (if (!bound(?configErrorDynamic2),false,?configErrorDynamic2) as ?configErrorDynamic  )
         BIND   (xsd:boolean(?designElementError || ?configErrorStatic || ?configErrorDynamic)
            AS ?configItemError)
      } Group by ?subject ?configItemError
  </ps:sparql>
        <ps:defaultValue rdf:datatype="&xsd;boolean">false</ps:defaultValue>
    </rdf:Description>
    <rdf:Description rdf:about="&as;productConfigurable">
        <ps:hidden rdf:datatype="&xsd;string">true</ps:hidden>
    </rdf:Description>
    <rdf:Description rdf:about="&as;salesDocumentVersion">
        <ps:defaultValue rdf:datatype="&xsd;int">1</ps:defaultValue>
    </rdf:Description>
    <rdf:Description rdf:about="&as;itemHeaderPrice">
        <ps:sparql rdf:datatype="&xsd;string">SELECT ?subject (?pppl  as ?itemHeaderPrice)
 #+ ?ppp4 + ?ppp3 + ?ppp2 + ?ppp1
 WHERE {
 #  OPTIONAL {
  #    ?subject as:includesPriceItem ?price .
  #    ?price as:hasPriceItemType as:ListPriceItemType.
  #    ?price as:priceItemBaseAmount ?plp.
  # }
    OPTIONAL {
      ?subject as:itemHeaderCurrentPrice ?plp .

   }



    OPTIONAL {
      ?subject as:includesPriceItem ?price1 .
      ?price1 as:hasPriceItemType ai:LaborCostType.
      ?price1 as:priceItemBaseAmount ?pp1.
   }
      OPTIONAL {
      ?subject as:includesPriceItem ?price2 .
      ?price2 as:hasPriceItemType ai:MaterialCostType.
      ?price2 as:priceItemBaseAmount ?pp2.
   }
   OPTIONAL {
      ?subject as:includesPriceItem ?price3 .
      ?price3 as:hasPriceItemType ai:OverheadCostType.
      ?price3 as:priceItemBaseAmount ?pp1.
   }
   OPTIONAL {
      ?subject as:includesPriceItem ?price4 .
      ?price4 as:hasPriceItemType ai:SFGCostType.
      ?price4 as:priceItemBaseAmount ?pp1.
   }
   BIND (IF (NOT EXISTS  {
      ?subject as:itemHeaderCurrentPrice ?plp .
         }, xsd:decimal(0), ?plp) as ?pppl).
BIND (IF (NOT EXISTS  {
      ?subject as:includesPriceItem ?price4 .
            ?price4 as:hasPriceItemType ai:SFGCostType.
     ?price4 as:priceItemBaseAmount ?pp4.
         }, xsd:decimal(0), ?pp4) as ?ppp4).
   BIND (IF (NOT EXISTS  {
      ?subject as:includesPriceItem ?price3 .
      ?price3 as:hasPriceItemType ai:OverheadCostType.
      ?price3 as:priceItemBaseAmount ?pp3.
        }, xsd:decimal(0), ?pp3) as ?ppp3).
    BIND (IF (NOT EXISTS  {
      ?subject as:includesPriceItem ?price2 .
      ?price2 as:hasPriceItemType ai:MaterialCostType.
      ?price2 as:priceItemBaseAmount ?pp2.
        }, xsd:decimal(0), ?pp2) as ?ppp2).
    BIND (IF (NOT EXISTS  {
      ?subject as:includesPriceItem ?price1 .
      ?price1 as:hasPriceItemType ai:LaborCostType.
      ?price1 as:priceItemBaseAmount ?pp1.
         }, xsd:decimal(0), ?pp1) as ?ppp1).


}</ps:sparql>
    </rdf:Description>
    <rdf:Description rdf:about="&as;documentHeaderTotalDiscount">
        <ps:sparql>SELECT ?subject (?val as ?documentHeaderTotalDiscount)
  WHERE {
    ?subject as:documentHeaderPrice ?price.
    ?subject as:documentHeaderPriceBeforeItemDiscount ?cost.
   BIND (xsd:decimal(( xsd:decimal(1) - (?cost / ?price))*xsd:decimal(100)) AS ?val)
}</ps:sparql>
    </rdf:Description>
    <rdf:Description rdf:about="&as;configItemErrorText">
        <ps:sparql>select ?subject ?configItemErrorText
where {
   ?subject as:configItemIncludedBy ?salesItem .
 OPTIONAL{
   ?subject ase:breakerFunctionValidationError ?bfError.
}
   OPTIONAL{
      ?subject ase:cubicleNoSpaceValidationError ?nospaceError.
   }
 OPTIONAL{
   ?subject as:configItemIncludedBy ?design .
   ?design as:designElementError ?designError .
   ?design as:designElementErrorText ?designErrorText .
}
   OPTIONAL{
      ?subject ase:electricalValidationError ?elecError.
   }
   OPTIONAL{
      ?subject as:configItemError ?configError.
   }


   BIND(IF(BOUND(?designError) &amp;&amp; ?designError, ?designErrorText,
       IF(?bfError,xsd:string(&quot;model.breakerFunctionValidationError&quot;),
             IF(?nospaceError,xsd:string(&quot;model.cubicleNoSpaceValidationError&quot;),
         IF(?elecError,xsd:string(&quot;model.electricalValidationError&quot;),
                  IF(?configError,xsd:string(&quot;model.configError&quot;),&quot;&quot;))))) AS ?configItemErrorText)

}</ps:sparql>
    </rdf:Description>
    <rdf:Description rdf:about="&as;designDocumentError">
        <ps:defaultValue rdf:datatype="&xsd;boolean">false</ps:defaultValue>
    </rdf:Description>
    <rdf:Description rdf:about="&as;itemHeaderUnitPrice">
        <ps:defaultValue rdf:datatype="&xsd;decimal">0</ps:defaultValue>
        <ps:sparql rdf:datatype="&xsd;string">SELECT ?subject (?val as ?itemHeaderUnitPrice)
  WHERE {
    ?subject as:itemHeaderPrice ?cp .
    ?subject as:itemHeaderPriceItemIncludedBy ?salesItem .

    ?subject as:itemHeaderAdditionalPrice ?ap .
 OPTIONAL{
          ?subject as:includesPriceItem ?discount1 .
          ?discount1 as:hasPriceItemType as:DiscountPriceItemType .
          ?discount1 as:priceItemBaseAmount ?amount1 .
    }
    BIND (IF (EXISTS {
                  ?subject as:includesPriceItem ?discount1 .
                  ?discount1 as:hasPriceItemType as:DiscountPriceItemType .
                  ?discount1 as:priceItemBaseAmount ?amount1 .
                  },
          ?amount1, xsd:decimal (0)) AS ?itemDiscount)
    OPTIONAL{
          ?subject as:includesPriceItem ?discount2 .
          ?discount2 as:hasPriceItemType as:ProductDiscountType .
          ?discount2 as:priceItemBaseAmount ?amount2 .
    }
    BIND (IF (EXISTS {
                  ?subject as:includesPriceItem ?discount2 .
                  ?discount2 as:hasPriceItemType as:ProductDiscountType .
                  ?discount2 as:priceItemBaseAmount ?amount2 .
                  },
          ?amount2, xsd:decimal (0)) AS ?productDiscount)
    OPTIONAL{
          ?subject as:includesPriceItem ?discount3 .
          ?discount3 as:hasPriceItemType as:CashDiscountType .
          ?discount3 as:priceItemBaseAmount ?amount3 .
    }
    BIND (IF (EXISTS {
                  ?subject as:includesPriceItem ?discount3 .
                  ?discount3 as:hasPriceItemType as:CashDiscountType .
                  ?discount3 as:priceItemBaseAmount ?amount3 .
                  },
          ?amount3, xsd:decimal (0)) AS ?cashDiscount)

    OPTIONAL{
          ?subject as:includesPriceItem ?discount4 .
          ?discount4 as:hasPriceItemType as:AccountDiscountType .
          ?discount4 as:priceItemBaseAmount ?amount4 .
    }
    BIND (IF (EXISTS {
                  ?subject as:includesPriceItem ?discount4 .
                  ?discount4 as:hasPriceItemType as:AccountDiscountType .
                  ?discount4 as:priceItemBaseAmount ?amount4 .
                  },
          ?amount4, xsd:decimal (0)) AS ?accountDiscount)
    BIND (
          xsd:decimal((((?cp + ?apu) * (1-(?productDiscount/100))) / (1-(?itemDiscount/100)) * (1-(?accountDiscount/100)))
                                   - ?cashDiscount + ?ap) AS ?val)
}
  </ps:sparql>
        <rdfs:comment rdf:datatype="&xsd;string">SELECT ?subject (?val as ?itemHeaderUnitPrice)
  WHERE {
    ?subject as:itemHeaderPrice ?cp .
    BIND (xsd:decimal(?cp)  AS ?val)
  }
  </rdfs:comment>
    </rdf:Description>
    <rdf:Description rdf:about="&as;productRating">
        <ps:hidden rdf:datatype="&xsd;string">true</ps:hidden>
    </rdf:Description>
    <rdf:Description rdf:about="&as;itemHeaderTotalPrice">
        <ps:sparql rdf:datatype="&xsd;string">SELECT ?subject ?itemHeaderTotalPrice
WHERE {
   ?subject as:itemHeaderUnitPrice ?cp .
   ?subject as:itemHeaderQuantity ?cq .
   ?salesItem as:includesItemHeaderPriceItem ?subject .
   ?salesItem as:salesItemOptional ?co .
   OPTIONAL{
      ?subject as:includesPriceItem ?transport .
      ?transport as:hasPriceItemType pci:TransportCostType .
      ?transport as:priceItemBaseAmount ?amount .
   }
   BIND (IF (EXISTS {
            ?subject as:includesPriceItem ?transport .
            ?transport as:hasPriceItemType pci:TransportCostType .
            ?transport as:priceItemBaseAmount ?amount .
         },
         ?amount, xsd:decimal (0)) AS ?transportCost)
   BIND ( IF (?co, xsd:decimal((?cp * ?cq) + ?transportCost), xsd:decimal(0))  as ?itemHeaderTotalPrice )
}</ps:sparql>
    </rdf:Description>
    <rdf:Description rdf:about="&as;documentHeaderPriceAfterItemDiscount">
        <ps:defaultValue rdf:datatype="&xsd;decimal">0</ps:defaultValue>
        <ps:sparql rdf:datatype="&xsd;string">SELECT ?subject (sum(?val) as ?documentHeaderPriceAfterItemDiscount)
  WHERE
  {
   ?subject as:documentHeaderPriceItemIncludedBy ?q.
    ?q as:includesSalesItem+ ?si .
    ?si as:includesItemHeaderPriceItem ?c .
    {
      SELECT DISTINCT ?c ?val
      WHERE
      {
             ?c as:itemHeaderTotalPrice ?cp .
             BIND (xsd:decimal(?cp) AS ?val )
      }
    }
  } group by ?subject</ps:sparql>
    </rdf:Description>
    <rdf:Description rdf:about="&as;itemHeaderQuantity">
        <ps:defaultValue rdf:datatype="&xsd;decimal">1.0</ps:defaultValue>
    </rdf:Description>
    <rdf:Description rdf:about="&as;salesItemError">
        <ps:defaultValue rdf:datatype="&xsd;boolean">false</ps:defaultValue>
        <ps:sparql rdf:datatype="&xsd;string">select DISTINCT ?subject ?salesItemError
where {
   ?subject as:includesConfigItem ?config .
   ?config as:configItemError ?configError .
   ?config ase:electricalValidationError ?electricalError.
   ?config ase:cubicleNoSpaceValidationError ?cubicleSpaceError.
   ?config ase:breakerFunctionValidationError ?bfError.
   #BIND(?electricalError || ?attribRangeError || ?bfError AS ?salesItemError)
   #FIXME BIND(?configError || ?electricalError || ?attribRangeError || ?bfError AS ?salesItemError)
    BIND(?configError || ?electricalError || ?cubicleSpaceError || ?bfError AS ?salesItemError)
}</ps:sparql>
        <rdfs:comment>select DISTINCT ?subject ?salesItemError
  where {
  ?subject as:includesConfigItem ?config .
  ?config as:configItemError ?salesItemError .
  }</rdfs:comment>
    </rdf:Description>
    <rdf:Description rdf:about="&as;productPrice">
        <ps:hidden rdf:datatype="&xsd;string">true</ps:hidden>
    </rdf:Description>
    <rdf:Description rdf:about="&as;designDocumentId">
        <ps:sparql rdf:datatype="&xsd;string">select ?subject (ps:leftPad(ps:sequence(&quot;DESIGNDOCUMENTSEQUENCE&quot;), 5,
      &quot;0&quot;) as ?designDocumentId) where { }</ps:sparql>
    </rdf:Description>
    <rdf:Description rdf:about="&as;productDiscountLimit">
        <ps:hidden rdf:datatype="&xsd;string">true</ps:hidden>
    </rdf:Description>
    <rdf:Description rdf:about="&as;kbVersion">
        <ps:hidden rdf:datatype="&xsd;string">true</ps:hidden>
    </rdf:Description>
    <rdf:Description rdf:about="&as;quoteId">
        <rdfs:comment rdf:datatype="&xsd;string">select ?subject (concat(ps:leftPad(ps:sequence(&quot;QUOTESEQUENCE&quot;), 4, &quot;0&quot;), &quot;/&quot;, ?companyAbbr, &quot;/&quot;, ?fyShortText, &quot;/&quot;, ps:leftPad(ps:sequencetable(&quot;COMPANYQUOTE&quot;, ?company  ), 4, &quot;0&quot;)) as ?quoteId)
where {
   ?subject as:hasCompany ?company.
   ?company as:companyAbbreviation ?companyAbbr.
   {
     select ?fyShortText
     where
     {
         ?fy a as:FiscalPeriod.
         ?fy ps:objectName ?fyShortText.
         ?fy as:fiscalPeriodEndDate ?fyEndDate.
         ?fy as:fiscalPeriodStartDate ?fyStartDate.
         filter(now()&gt;?fyStartDate &amp;&amp;  now() &lt;?fyEndDate)
      }
   }
}</rdfs:comment>
        <ps:sparql rdf:datatype="&xsd;string">select ?subject (ps:leftPad(ps:sequence(&quot;QUOTESEQUENCE&quot;), 5, &quot;0&quot;) as ?quoteId) where { }</ps:sparql>
    </rdf:Description>
    <rdf:Description rdf:about="&as;salesItemOptional">
        <ps:defaultValue rdf:datatype="&xsd;boolean">true</ps:defaultValue>
    </rdf:Description>
    <rdf:Description rdf:about="&as;documentHeaderDiscount">
        <ps:defaultValue rdf:datatype="&xsd;decimal">0</ps:defaultValue>
    </rdf:Description>
    <rdf:Description rdf:about="&as;groupHidden">
        <ps:defaultValue rdf:datatype="&xsd;boolean">false</ps:defaultValue>
    </rdf:Description>
    <rdf:Description rdf:about="&as;itemHeaderMargin">
        <ps:defaultValue rdf:datatype="&xsd;decimal">0</ps:defaultValue>
        <ps:sparql rdf:datatype="&xsd;string">SELECT ?subject (?val as ?itemHeaderMargin)
  WHERE {
    ?subject as:itemHeaderUnitPrice ?cp .
    ?subject as:itemHeaderCost ?cc .
    BIND ( (xsd:decimal(?cp) - xsd:decimal(?cc)) / xsd:decimal(?cc) * 100  AS ?val)
  }</ps:sparql>
    </rdf:Description>
    <rdf:Description rdf:about="&as;productDescription">
        <ps:hidden rdf:datatype="&xsd;string">false</ps:hidden>
    </rdf:Description>
    <rdf:Description rdf:about="&as;kbType">
        <ps:hidden rdf:datatype="&xsd;string">true</ps:hidden>
    </rdf:Description>
    <rdf:Description rdf:about="http://www.inmindcomputing.com/application/products/products-schema.owl#metalProcessToolingCost">
        <as:costingRelevantSequence rdf:datatype="&xsd;int">5</as:costingRelevantSequence>
        <as:costingRelevant rdf:datatype="&xsd;boolean">true</as:costingRelevant>
    </rdf:Description>
    <rdf:Description rdf:about="&as;itemHeaderAdditionalPrice">
        <ps:defaultValue rdf:datatype="&xsd;decimal">0</ps:defaultValue>
        <ps:sparql rdf:datatype="&xsd;string">SELECT ?subject ?itemHeaderAdditionalPrice
  WHERE {
   ?subject ase:itemHeaderAdditionalPriceIncludes ?priceItem2 .
BIND (?priceItem2 + ?priceItem1 as ?itemHeaderAdditionalPrice)

  } </ps:sparql>
    </rdf:Description>
    <rdf:Description rdf:about="&as;itemHeaderDiscount">
        <ps:defaultValue rdf:datatype="&xsd;decimal">30</ps:defaultValue>
        <as:costingRelevant rdf:datatype="&xsd;boolean">true</as:costingRelevant>
        <as:costingRelevantSequence>25</as:costingRelevantSequence>
    </rdf:Description>
    <rdf:Description rdf:about="&as;productOptionsPrice">
        <ps:hidden rdf:datatype="&xsd;boolean">true</ps:hidden>
    </rdf:Description>
    <rdf:Description rdf:about="&as;documentHeaderListPrice">
        <ps:defaultValue rdf:datatype="&xsd;decimal">0</ps:defaultValue>
        <ps:sparql rdf:datatype="&xsd;string">SELECT ?subject (sum(?val) as ?documentHeaderListPrice)
  WHERE
  {
    ?subject as:documentHeaderPriceItemIncludedBy ?q.
    ?q as:includesSalesItem+ ?si .
    ?si as:includesItemHeaderPriceItem ?headerPriceItem .
    {
      SELECT DISTINCT ?c ?val
      WHERE
      {
             ?headerPriceItem as:itemHeaderQuantity ?cq .
             ?headerPriceItem as:itemHeaderPrice ?cp .
             BIND (xsd:decimal(xsd:decimal(?cp) * xsd:decimal(?cq))  AS ?val)
      }
    }
  }
  GROUP BY ?subject</ps:sparql>
    </rdf:Description>
    <rdf:Description rdf:about="&as;itemHeaderCost">
        <ps:sparql rdf:datatype="&xsd;string">SELECT ?subject (?val as ?itemHeaderCost)
  WHERE {
    ?subject as:itemHeaderPrice ?cp .
    BIND (xsd:decimal(?cp * 0.8) AS ?val)
  }</ps:sparql>
    </rdf:Description>
    <rdf:Description rdf:about="&as;productATPSchedule">
        <ps:hidden rdf:datatype="&xsd;string">true</ps:hidden>
    </rdf:Description>
    <rdf:Description rdf:about="&as;productDiscontAllowed">
        <ps:hidden rdf:datatype="&xsd;string">true</ps:hidden>
    </rdf:Description>
    <rdf:Description rdf:about="&as;productVolumeAllowed">
        <ps:hidden rdf:datatype="&xsd;string">true</ps:hidden>
    </rdf:Description>
    <rdf:Description rdf:about="&as;documentHeaderPriceAfterExchangeRate">
        <ps:defaultValue rdf:datatype="&xsd;decimal">0</ps:defaultValue>
        <ps:sparql rdf:datatype="&xsd;string">SELECT ?subject (?val AS ?documentHeaderPriceAfterExchangeRate)
            WHERE{
                    ?subject as:documentHeaderPrice ?price.
                    ?subject as:documentHeaderPriceItemIncludedBy ?quote.
                    OPTIONAL{
                        ?quote as:includeExchangeRateSalesDocument ?rate .
                        ?quote as:hasBaseCurrency ?baseCurrency .
                        ?quote as:hasTargetCurrency ?targetCurrency .
                        ?rate as:hasBaseCurrency ?baseCurrency .
                        ?rate as:hasTargetCurrency ?targetCurrency .
                        ?rate as:exchangeRate ?rateValue .   }
                        BIND ( IF ( EXISTS {
                        ?quote as:includeExchangeRateSalesDocument ?rate .
                        ?quote as:hasBaseCurrency ?baseCurrency .
                        ?quote as:hasTargetCurrency ?targetCurrency .
                        ?rate as:hasBaseCurrency ?baseCurrency .
                        ?rate as:hasTargetCurrency ?targetCurrency .
                             },
                        xsd:decimal(?price * ?rateValue), ?price ) AS ?val )
    }</ps:sparql>
    </rdf:Description>
    <rdf:Description rdf:about="&as;opportunityChanceofSuccess">
        <ps:defaultValue rdf:datatype="&xsd;int">50</ps:defaultValue>
    </rdf:Description>
    <rdf:Description rdf:about="&as;quoteReportTitle">
        <ps:defaultValue xml:lang="de">Angebot</ps:defaultValue>
        <ps:defaultValue xml:lang="en">Quote</ps:defaultValue>
    </rdf:Description>
</rdf:RDF>



<!-- Generated by the OWL API (version 3.4.2) http://owlapi.sourceforge.net -->

